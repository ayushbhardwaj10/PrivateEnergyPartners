\***\*Instructions to setup\*\*** :

######

1. Git pull https://github.com/ayushbhardwaj10/PrivateEnergyPartners.git
2. Open a terminal and go inside the project's root. ie. PrivateEnergyPartners/
3. Make sure you have docker installed on your machine and docker runs from the terminal. To test this, type "docker --version". It should print docker version without errors.
4. docker pull ayush1041998/reactapp:latest
5. docker pull ayush1041998/flaskapp:latest
6. docker-compose up --build
7. Go to a browser and type : http://localhost:3000/
8. You can use the following 2 users for whom the data is being loaded into database :
   (a) Username : ayush@gmail.com Password : Password@123
   (b) Username : john@gmail.com Password@123
   Note : if you create a new user, it'll still get created but for them, there'll be no production and consumption data.
9. AWS Deployment (Alterntive to docker for testing) : http://energy.eba-nq9wrg49.us-east-2.elasticbeanstalk.com/
   - AWS RDS : Utilized for deploying MySQL Database
   - AWS Elastic Beanstalk : For deploying ReactJS app and Flask Server.

Note : Please read Features.txt to view the list of amazing features added to the app.

\***\*APIs List\*\***- (Test this using docker container)

######

Note : All the APIs other than /signup and /login are protected and can only be accessed by providing the access token generated by /login api in in the header.

1. Signup Users : /signup - POST
   - endpoint : http://127.0.0.1:5001/signup
   - headers : {Content-Type : application/json}
   - body : {
     "fullName":"Raman Gupta",
     "userName":"raman@gmail.com",
     "password":"Password@123"
     }
2. Login users : /login - POST

   - endpoint : http://127.0.0.1:5001/login
   - headers : {Content-Type : application/json}
   - body : {
     "userName": <userName of user>,
     "password": <hash(SHA 256 based) of raw password>
     }

   For testing you can use the username and password a already created user :
   body : {
   "userName":"ayush@gmail.com",
   "password":"ff7bd97b1a7789ddd2775122fd6817f3173672da9f802ceec57f284325bf589f"
   }

   Note : You can store the access token returned here. It'll be used for the next APIs.

3. Check if the token is valid: /tokenValid - GET

   - endpoint : http://127.0.0.1:5001/tokenValid
   - header : Authorization: Bearer <access token>

4. Refresh the token : /refresh_token - POST

   - endpoint : http://127.0.0.1:5001/refresh_token
   - header : Authorization: Bearer <access token>

5. Fetch the Linear Graph data that compares the production vs consumption for a energy for a duration : /linegraph - POST
   - endpoint : http://127.0.0.1:5001/linegraph
   - headers: {
     "Content-Type": "application/json",
     Authorization: Bearer <Access token>,
     }
   - body
     {
     userid : <userid>
     duration : <duration> // can be only 2,4,8 to represent last 2,4 and 8 days  
      "source" : <energy source> // can be either - solar,wind or hydro
     }
     Note : Since the production and consumption data exists only for user id 1 and 4. Please use below to test
     body : {
     "userid" :1,
     "duration" :2,
     "source" : "solar"
     }
6. Fetch data for Pie chart graph : /pieChartData : POST

   - endpoint : http://127.0.0.1:5001/pieChartData
   - headers: {
     "Content-Type": "application/json",
     Authorization: Bearer <Access token>,
     }
   - body
     {
     userid : <userid>
     energy_type : <energy source> // can be either - solar,wind or hydro
     "duration" : <duration> // can be only 2,4,8 to represent last 2,4 and 8 days  
      }
     Note : Since the production and consumption data exists only for user id 1 and 4. Please use below to test
     body : {
     "userid" :1,
     "energy_type" :"solar",
     "duration" :4
     }

7. Get Energy Date wise - used to fetch the energy produced and consumed for last 7 days given a userid - /getEnergyDateWise - POST

   - endpoint : http://127.0.0.1:5001/getEnergyDateWise
   - headers: {
     Content-Type: application/json,
     Authorization: Bearer <Access token>,
     }
   - body : {
     "user_id" :<user id>, // for userid = 1 and 4 we have production and consumption data. please use these two.
     "energy_type" : <energy source> // can be either - solar,wind or hydro
     }
     Note : Since the production and consumption data exists only for user id 1 and 4. Please use below to test
     body : {
     "user_id" :1,
     "energy_type" : "wind"
     }

8. Analyze total energy produced and consumed by all the users and the type of energy produced and consumed by all - /GlobalEnergyData - GET
   - endpoint : http://127.0.0.1:5001/GlobalEnergyData
   - headers : { Authorization: Bearer <Access token>}

Note : If at any point, the API's don't work and return 401 status code, it means that the access token has expired, use the /refresh_token token api to get fresh tokens.

\***\*Testing for flask app\*\*** - running test cases

######

Go to /backend and Run the test cases using : python3 -m unittest discover tests

\***\*Future Improvement Areas\*\***

######

1. Using HTTPOnly cookies for storing refresh tokens to protect the refresh tokens from Cross Site Scripting Attacks since the token will be accessed from javascript.
2. Use a SSL certificates to establish a HTTPS connection to make the transit more secure.
